<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-tc-webfont@1.0.0/style.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" />
  <style>
    body {
      font-family: "LXGW WenKai", sans-serif;
       
      font-family: "LXGW WenKai Lite", sans-serif;
       
      font-family: "LXGW WenKai TC", sans-serif;
       
      font-family: "LXGW WenKai Screen", sans-serif;
    }
  </style>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 《游戏编程算法与技巧》渲染篇 | 星际中继站</title>
  <link rel = 'canonical' href = 'https://www.sooda.net.cn/posts/%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B%E7%AE%97%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7%E6%B8%B2%E6%9F%93%E7%AF%87/'>
  <meta name="description" content="代码修仙法力无边">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="《游戏编程算法与技巧》渲染篇" />
<meta property="og:description" content="闲话 近日读完了《游戏编程算法与技巧》这本书。更感觉是《游戏引擎架构》的缩略图。先阅读此书会对游戏开发有一个整体的认识与理解。适合需要了解游戏开发的初学者阅读
此书对于我也是梳理游戏开发知识点的概括好书。对于此书会在重点部分做提炼。
渲染基础 此部分只做简单的总结，网上已经有很多的好文章了。而此书作者也没有很详细的写这部分。毕竟这块要是讲细了够学一辈子了
推荐一些好文（有兴趣可以看看我写的软渲染）
闫令琪老师的GAMES101课程 韦易笑老师的mini3d项目 韦易笑老师的RenderHelp项目 Dmitry V. Sokolov老师的tinyrender项目 双缓冲技术解决渲染撕裂 CRT显示器时代，所谓场消隐期（VBLANK）：喷枪从右下角移动到左上角所花费的时间
渲染撕裂：显示器在绘制像素缓冲区中的内容时，游戏输出了新的渲染结果到像素缓冲区，导致渲染撕裂
双缓冲技术：解决屏幕撕裂，用两块像素缓冲区，游戏交替的在这两块缓冲区中绘制
垂直同步：让交换缓冲区的时机在场消隐期进行
三缓冲技术：利用3个缓冲区，让画面更加平滑，但增加输入延迟
画家算法 所有物体按照从后往前的顺序绘制。优点：绘制绝对正确（包括透明物体），缺点：overdraw高，效率慢
3D渲染 为什么用三角形表示面片？
仅用3顶点表示的最简单的多边形 三角形总在一个面上 任何3D对象都可以简单地用细分三角面表示 网格：多个三角面组成
软件光栅化 将3D模型正确渲染到2D颜色缓冲的算法
3D模型经过4个主要坐标系空间转到最终的2D颜色缓冲中
模型（局部）坐标系：相对于模型自身的坐标系（角色模型一般为两脚中间） 世界坐标系：所有对象都相对于世界原点偏移 视角（摄像机）坐标系：将世界坐标系的模型变换到相对于摄像机的位置上 投影坐标系：将3D场景平铺到2D平面上得到的坐标系 除了上面的坐标系外，还有一个特殊的坐标系，就是齐次坐标系
将4D坐标系应用在3D空间中，就被称为齐次坐标系。而第四个分量为w分量。如果w=0，则此齐次坐标是3D向量。而w=1，则表示此齐次坐标是3D的点
矩阵变换 将模型在各个坐标系中转换所用的矩阵，就是矩阵变换。
此处和之后所用的都为行向量。（OpenGL为列向量） 模型转世界坐标系 平移 将顶点移动一段距离，只作用在点上
$$ T(t_x,t_y,t_z) = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \newline 0 &amp; 1 &amp; 0 &amp; 0 \newline 0 &amp; 0 &amp; 1 &amp; 0 \newline t_x &amp; t_y &amp; t_z &amp; 1 \end{bmatrix} $$" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sooda.net.cn/posts/%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B%E7%AE%97%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7%E6%B8%B2%E6%9F%93%E7%AF%87/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-22T15:57:24+08:00" />
<meta property="article:modified_time" content="2021-12-22T15:57:24+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="《游戏编程算法与技巧》渲染篇"/>
<meta name="twitter:description" content="闲话 近日读完了《游戏编程算法与技巧》这本书。更感觉是《游戏引擎架构》的缩略图。先阅读此书会对游戏开发有一个整体的认识与理解。适合需要了解游戏开发的初学者阅读
此书对于我也是梳理游戏开发知识点的概括好书。对于此书会在重点部分做提炼。
渲染基础 此部分只做简单的总结，网上已经有很多的好文章了。而此书作者也没有很详细的写这部分。毕竟这块要是讲细了够学一辈子了
推荐一些好文（有兴趣可以看看我写的软渲染）
闫令琪老师的GAMES101课程 韦易笑老师的mini3d项目 韦易笑老师的RenderHelp项目 Dmitry V. Sokolov老师的tinyrender项目 双缓冲技术解决渲染撕裂 CRT显示器时代，所谓场消隐期（VBLANK）：喷枪从右下角移动到左上角所花费的时间
渲染撕裂：显示器在绘制像素缓冲区中的内容时，游戏输出了新的渲染结果到像素缓冲区，导致渲染撕裂
双缓冲技术：解决屏幕撕裂，用两块像素缓冲区，游戏交替的在这两块缓冲区中绘制
垂直同步：让交换缓冲区的时机在场消隐期进行
三缓冲技术：利用3个缓冲区，让画面更加平滑，但增加输入延迟
画家算法 所有物体按照从后往前的顺序绘制。优点：绘制绝对正确（包括透明物体），缺点：overdraw高，效率慢
3D渲染 为什么用三角形表示面片？
仅用3顶点表示的最简单的多边形 三角形总在一个面上 任何3D对象都可以简单地用细分三角面表示 网格：多个三角面组成
软件光栅化 将3D模型正确渲染到2D颜色缓冲的算法
3D模型经过4个主要坐标系空间转到最终的2D颜色缓冲中
模型（局部）坐标系：相对于模型自身的坐标系（角色模型一般为两脚中间） 世界坐标系：所有对象都相对于世界原点偏移 视角（摄像机）坐标系：将世界坐标系的模型变换到相对于摄像机的位置上 投影坐标系：将3D场景平铺到2D平面上得到的坐标系 除了上面的坐标系外，还有一个特殊的坐标系，就是齐次坐标系
将4D坐标系应用在3D空间中，就被称为齐次坐标系。而第四个分量为w分量。如果w=0，则此齐次坐标是3D向量。而w=1，则表示此齐次坐标是3D的点
矩阵变换 将模型在各个坐标系中转换所用的矩阵，就是矩阵变换。
此处和之后所用的都为行向量。（OpenGL为列向量） 模型转世界坐标系 平移 将顶点移动一段距离，只作用在点上
$$ T(t_x,t_y,t_z) = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \newline 0 &amp; 1 &amp; 0 &amp; 0 \newline 0 &amp; 0 &amp; 1 &amp; 0 \newline t_x &amp; t_y &amp; t_z &amp; 1 \end{bmatrix} $$"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://www.sooda.net.cn/css/styles.8480f88b3198f77902eb3a931bc1677934616560f15f2058dc03132fde8d2442011a898fe54c0356f7d9d60df6194e304cbb445ce31f2d290c4be3ed8335a04d.css" integrity="sha512-hID4izGY93kC6zqTG8FneTRhZWDxXyBY3AMTL96NJEIBGomP5UwDVvfZ1g32GU4wTLtEXOMfLSkMS&#43;PtgzWgTQ=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://www.sooda.net.cn/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/categories">Categories</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://www.sooda.net.cn/posts/unity%E5%AE%9E%E6%88%98/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://www.sooda.net.cn/posts/%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B%E7%AE%97%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7%E8%BE%93%E5%85%A5%E5%92%8C%E5%A3%B0%E9%9F%B3%E7%AF%87/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&text=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&is_video=false&description=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87&body=Check out this article: https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&name=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87&description=%e9%97%b2%e8%af%9d%20%e8%bf%91%e6%97%a5%e8%af%bb%e5%ae%8c%e4%ba%86%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e8%bf%99%e6%9c%ac%e4%b9%a6%e3%80%82%e6%9b%b4%e6%84%9f%e8%a7%89%e6%98%af%e3%80%8a%e6%b8%b8%e6%88%8f%e5%bc%95%e6%93%8e%e6%9e%b6%e6%9e%84%e3%80%8b%e7%9a%84%e7%bc%a9%e7%95%a5%e5%9b%be%e3%80%82%e5%85%88%e9%98%85%e8%af%bb%e6%ad%a4%e4%b9%a6%e4%bc%9a%e5%af%b9%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e6%9c%89%e4%b8%80%e4%b8%aa%e6%95%b4%e4%bd%93%e7%9a%84%e8%ae%a4%e8%af%86%e4%b8%8e%e7%90%86%e8%a7%a3%e3%80%82%e9%80%82%e5%90%88%e9%9c%80%e8%a6%81%e4%ba%86%e8%a7%a3%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e7%9a%84%e5%88%9d%e5%ad%a6%e8%80%85%e9%98%85%e8%af%bb%0a%e6%ad%a4%e4%b9%a6%e5%af%b9%e4%ba%8e%e6%88%91%e4%b9%9f%e6%98%af%e6%a2%b3%e7%90%86%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e7%9f%a5%e8%af%86%e7%82%b9%e7%9a%84%e6%a6%82%e6%8b%ac%e5%a5%bd%e4%b9%a6%e3%80%82%e5%af%b9%e4%ba%8e%e6%ad%a4%e4%b9%a6%e4%bc%9a%e5%9c%a8%e9%87%8d%e7%82%b9%e9%83%a8%e5%88%86%e5%81%9a%e6%8f%90%e7%82%bc%e3%80%82%0a%e6%b8%b2%e6%9f%93%e5%9f%ba%e7%a1%80%20%e6%ad%a4%e9%83%a8%e5%88%86%e5%8f%aa%e5%81%9a%e7%ae%80%e5%8d%95%e7%9a%84%e6%80%bb%e7%bb%93%ef%bc%8c%e7%bd%91%e4%b8%8a%e5%b7%b2%e7%bb%8f%e6%9c%89%e5%be%88%e5%a4%9a%e7%9a%84%e5%a5%bd%e6%96%87%e7%ab%a0%e4%ba%86%e3%80%82%e8%80%8c%e6%ad%a4%e4%b9%a6%e4%bd%9c%e8%80%85%e4%b9%9f%e6%b2%a1%e6%9c%89%e5%be%88%e8%af%a6%e7%bb%86%e7%9a%84%e5%86%99%e8%bf%99%e9%83%a8%e5%88%86%e3%80%82%e6%af%95%e7%ab%9f%e8%bf%99%e5%9d%97%e8%a6%81%e6%98%af%e8%ae%b2%e7%bb%86%e4%ba%86%e5%a4%9f%e5%ad%a6%e4%b8%80%e8%be%88%e5%ad%90%e4%ba%86%0a%e6%8e%a8%e8%8d%90%e4%b8%80%e4%ba%9b%e5%a5%bd%e6%96%87%ef%bc%88%e6%9c%89%e5%85%b4%e8%b6%a3%e5%8f%af%e4%bb%a5%e7%9c%8b%e7%9c%8b%e6%88%91%e5%86%99%e7%9a%84%e8%bd%af%e6%b8%b2%e6%9f%93%ef%bc%89%0a%e9%97%ab%e4%bb%a4%e7%90%aa%e8%80%81%e5%b8%88%e7%9a%84GAMES101%e8%af%be%e7%a8%8b%20%e9%9f%a6%e6%98%93%e7%ac%91%e8%80%81%e5%b8%88%e7%9a%84mini3d%e9%a1%b9%e7%9b%ae%20%e9%9f%a6%e6%98%93%e7%ac%91%e8%80%81%e5%b8%88%e7%9a%84RenderHelp%e9%a1%b9%e7%9b%ae%20Dmitry%20V.%20Sokolov%e8%80%81%e5%b8%88%e7%9a%84tinyrender%e9%a1%b9%e7%9b%ae%20%e5%8f%8c%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%e8%a7%a3%e5%86%b3%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%20CRT%e6%98%be%e7%a4%ba%e5%99%a8%e6%97%b6%e4%bb%a3%ef%bc%8c%e6%89%80%e8%b0%93%e5%9c%ba%e6%b6%88%e9%9a%90%e6%9c%9f%ef%bc%88VBLANK%ef%bc%89%ef%bc%9a%e5%96%b7%e6%9e%aa%e4%bb%8e%e5%8f%b3%e4%b8%8b%e8%a7%92%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%b8%8a%e8%a7%92%e6%89%80%e8%8a%b1%e8%b4%b9%e7%9a%84%e6%97%b6%e9%97%b4%0a%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%ef%bc%9a%e6%98%be%e7%a4%ba%e5%99%a8%e5%9c%a8%e7%bb%98%e5%88%b6%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%e4%b8%ad%e7%9a%84%e5%86%85%e5%ae%b9%e6%97%b6%ef%bc%8c%e6%b8%b8%e6%88%8f%e8%be%93%e5%87%ba%e4%ba%86%e6%96%b0%e7%9a%84%e6%b8%b2%e6%9f%93%e7%bb%93%e6%9e%9c%e5%88%b0%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e5%af%bc%e8%87%b4%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%0a%e5%8f%8c%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%ef%bc%9a%e8%a7%a3%e5%86%b3%e5%b1%8f%e5%b9%95%e6%92%95%e8%a3%82%ef%bc%8c%e7%94%a8%e4%b8%a4%e5%9d%97%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e6%b8%b8%e6%88%8f%e4%ba%a4%e6%9b%bf%e7%9a%84%e5%9c%a8%e8%bf%99%e4%b8%a4%e5%9d%97%e7%bc%93%e5%86%b2%e5%8c%ba%e4%b8%ad%e7%bb%98%e5%88%b6%0a%e5%9e%82%e7%9b%b4%e5%90%8c%e6%ad%a5%ef%bc%9a%e8%ae%a9%e4%ba%a4%e6%8d%a2%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e6%97%b6%e6%9c%ba%e5%9c%a8%e5%9c%ba%e6%b6%88%e9%9a%90%e6%9c%9f%e8%bf%9b%e8%a1%8c%0a%e4%b8%89%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%ef%bc%9a%e5%88%a9%e7%94%a83%e4%b8%aa%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e8%ae%a9%e7%94%bb%e9%9d%a2%e6%9b%b4%e5%8a%a0%e5%b9%b3%e6%bb%91%ef%bc%8c%e4%bd%86%e5%a2%9e%e5%8a%a0%e8%be%93%e5%85%a5%e5%bb%b6%e8%bf%9f%0a%e7%94%bb%e5%ae%b6%e7%ae%97%e6%b3%95%20%e6%89%80%e6%9c%89%e7%89%a9%e4%bd%93%e6%8c%89%e7%85%a7%e4%bb%8e%e5%90%8e%e5%be%80%e5%89%8d%e7%9a%84%e9%a1%ba%e5%ba%8f%e7%bb%98%e5%88%b6%e3%80%82%e4%bc%98%e7%82%b9%ef%bc%9a%e7%bb%98%e5%88%b6%e7%bb%9d%e5%af%b9%e6%ad%a3%e7%a1%ae%ef%bc%88%e5%8c%85%e6%8b%ac%e9%80%8f%e6%98%8e%e7%89%a9%e4%bd%93%ef%bc%89%ef%bc%8c%e7%bc%ba%e7%82%b9%ef%bc%9aoverdraw%e9%ab%98%ef%bc%8c%e6%95%88%e7%8e%87%e6%85%a2%0a3D%e6%b8%b2%e6%9f%93%20%e4%b8%ba%e4%bb%80%e4%b9%88%e7%94%a8%e4%b8%89%e8%a7%92%e5%bd%a2%e8%a1%a8%e7%a4%ba%e9%9d%a2%e7%89%87%ef%bc%9f%0a%e4%bb%85%e7%94%a83%e9%a1%b6%e7%82%b9%e8%a1%a8%e7%a4%ba%e7%9a%84%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%a4%9a%e8%be%b9%e5%bd%a2%20%e4%b8%89%e8%a7%92%e5%bd%a2%e6%80%bb%e5%9c%a8%e4%b8%80%e4%b8%aa%e9%9d%a2%e4%b8%8a%20%e4%bb%bb%e4%bd%953D%e5%af%b9%e8%b1%a1%e9%83%bd%e5%8f%af%e4%bb%a5%e7%ae%80%e5%8d%95%e5%9c%b0%e7%94%a8%e7%bb%86%e5%88%86%e4%b8%89%e8%a7%92%e9%9d%a2%e8%a1%a8%e7%a4%ba%20%e7%bd%91%e6%a0%bc%ef%bc%9a%e5%a4%9a%e4%b8%aa%e4%b8%89%e8%a7%92%e9%9d%a2%e7%bb%84%e6%88%90%0a%e8%bd%af%e4%bb%b6%e5%85%89%e6%a0%85%e5%8c%96%20%e5%b0%863D%e6%a8%a1%e5%9e%8b%e6%ad%a3%e7%a1%ae%e6%b8%b2%e6%9f%93%e5%88%b02D%e9%a2%9c%e8%89%b2%e7%bc%93%e5%86%b2%e7%9a%84%e7%ae%97%e6%b3%95%0a3D%e6%a8%a1%e5%9e%8b%e7%bb%8f%e8%bf%874%e4%b8%aa%e4%b8%bb%e8%a6%81%e5%9d%90%e6%a0%87%e7%b3%bb%e7%a9%ba%e9%97%b4%e8%bd%ac%e5%88%b0%e6%9c%80%e7%bb%88%e7%9a%842D%e9%a2%9c%e8%89%b2%e7%bc%93%e5%86%b2%e4%b8%ad%0a%e6%a8%a1%e5%9e%8b%ef%bc%88%e5%b1%80%e9%83%a8%ef%bc%89%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e7%9b%b8%e5%af%b9%e4%ba%8e%e6%a8%a1%e5%9e%8b%e8%87%aa%e8%ba%ab%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%88%e8%a7%92%e8%89%b2%e6%a8%a1%e5%9e%8b%e4%b8%80%e8%88%ac%e4%b8%ba%e4%b8%a4%e8%84%9a%e4%b8%ad%e9%97%b4%ef%bc%89%20%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e6%89%80%e6%9c%89%e5%af%b9%e8%b1%a1%e9%83%bd%e7%9b%b8%e5%af%b9%e4%ba%8e%e4%b8%96%e7%95%8c%e5%8e%9f%e7%82%b9%e5%81%8f%e7%a7%bb%20%e8%a7%86%e8%a7%92%ef%bc%88%e6%91%84%e5%83%8f%e6%9c%ba%ef%bc%89%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e5%b0%86%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%e7%9a%84%e6%a8%a1%e5%9e%8b%e5%8f%98%e6%8d%a2%e5%88%b0%e7%9b%b8%e5%af%b9%e4%ba%8e%e6%91%84%e5%83%8f%e6%9c%ba%e7%9a%84%e4%bd%8d%e7%bd%ae%e4%b8%8a%20%e6%8a%95%e5%bd%b1%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e5%b0%863D%e5%9c%ba%e6%99%af%e5%b9%b3%e9%93%ba%e5%88%b02D%e5%b9%b3%e9%9d%a2%e4%b8%8a%e5%be%97%e5%88%b0%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%20%e9%99%a4%e4%ba%86%e4%b8%8a%e9%9d%a2%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%e5%a4%96%ef%bc%8c%e8%bf%98%e6%9c%89%e4%b8%80%e4%b8%aa%e7%89%b9%e6%ae%8a%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%8c%e5%b0%b1%e6%98%af%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e7%b3%bb%0a%e5%b0%864D%e5%9d%90%e6%a0%87%e7%b3%bb%e5%ba%94%e7%94%a8%e5%9c%a83D%e7%a9%ba%e9%97%b4%e4%b8%ad%ef%bc%8c%e5%b0%b1%e8%a2%ab%e7%a7%b0%e4%b8%ba%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e7%b3%bb%e3%80%82%e8%80%8c%e7%ac%ac%e5%9b%9b%e4%b8%aa%e5%88%86%e9%87%8f%e4%b8%baw%e5%88%86%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9cw%3d0%ef%bc%8c%e5%88%99%e6%ad%a4%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e6%98%af3D%e5%90%91%e9%87%8f%e3%80%82%e8%80%8cw%3d1%ef%bc%8c%e5%88%99%e8%a1%a8%e7%a4%ba%e6%ad%a4%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e6%98%af3D%e7%9a%84%e7%82%b9%0a%e7%9f%a9%e9%98%b5%e5%8f%98%e6%8d%a2%20%e5%b0%86%e6%a8%a1%e5%9e%8b%e5%9c%a8%e5%90%84%e4%b8%aa%e5%9d%90%e6%a0%87%e7%b3%bb%e4%b8%ad%e8%bd%ac%e6%8d%a2%e6%89%80%e7%94%a8%e7%9a%84%e7%9f%a9%e9%98%b5%ef%bc%8c%e5%b0%b1%e6%98%af%e7%9f%a9%e9%98%b5%e5%8f%98%e6%8d%a2%e3%80%82%0a%e6%ad%a4%e5%a4%84%e5%92%8c%e4%b9%8b%e5%90%8e%e6%89%80%e7%94%a8%e7%9a%84%e9%83%bd%e4%b8%ba%e8%a1%8c%e5%90%91%e9%87%8f%e3%80%82%ef%bc%88OpenGL%e4%b8%ba%e5%88%97%e5%90%91%e9%87%8f%ef%bc%89%20%e6%a8%a1%e5%9e%8b%e8%bd%ac%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%20%e5%b9%b3%e7%a7%bb%20%e5%b0%86%e9%a1%b6%e7%82%b9%e7%a7%bb%e5%8a%a8%e4%b8%80%e6%ae%b5%e8%b7%9d%e7%a6%bb%ef%bc%8c%e5%8f%aa%e4%bd%9c%e7%94%a8%e5%9c%a8%e7%82%b9%e4%b8%8a%0a%24%24%20T%28t_x%2ct_y%2ct_z%29%20%3d%20%5cbegin%7bbmatrix%7d%201%20%26amp%3b%200%20%26amp%3b%200%20%26amp%3b%200%20%5cnewline%200%20%26amp%3b%201%20%26amp%3b%200%20%26amp%3b%200%20%5cnewline%200%20%26amp%3b%200%20%26amp%3b%201%20%26amp%3b%200%20%5cnewline%20t_x%20%26amp%3b%20t_y%20%26amp%3b%20t_z%20%26amp%3b%201%20%5cend%7bbmatrix%7d%20%24%24" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&t=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#双缓冲技术解决渲染撕裂">双缓冲技术解决渲染撕裂</a></li>
    <li><a href="#画家算法">画家算法</a></li>
    <li><a href="#3d渲染">3D渲染</a>
      <ul>
        <li><a href="#软件光栅化">软件光栅化</a>
          <ul>
            <li><a href="#矩阵变换">矩阵变换</a></li>
            <li><a href="#模型转世界坐标系">模型转世界坐标系</a></li>
            <li><a href="#观察矩阵look-at">观察矩阵(Look-At)</a></li>
            <li><a href="#投影坐标系">投影坐标系</a></li>
            <li><a href="#光照与着色">光照与着色</a></li>
            <li><a href="#深度缓冲区">深度缓冲区</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        《游戏编程算法与技巧》渲染篇
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-12-22 15:57:24 &#43;0800 CST" itemprop="datePublished">2021-12-22</time>
          
        </div>
        
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/%E6%B8%B8%E6%88%8F%E7%BC%96%E7%A8%8B%E7%AE%97%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7">《游戏编程算法与技巧》</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/%E6%B8%B2%E6%9F%93" rel="tag">渲染</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h1 id="闲话">闲话</h1>
<p>近日读完了《游戏编程算法与技巧》这本书。更感觉是《游戏引擎架构》的缩略图。先阅读此书会对游戏开发有一个整体的认识与理解。适合需要了解游戏开发的初学者阅读</p>
<p>此书对于我也是梳理游戏开发知识点的概括好书。对于此书会在重点部分做提炼。</p>
<h1 id="渲染基础">渲染基础</h1>
<p>此部分只做简单的总结，网上已经有很多的好文章了。而此书作者也没有很详细的写这部分。毕竟这块要是讲细了够学一辈子了</p>
<p>推荐一些好文（有兴趣可以看看我写的<a href="https://gitee.com/GeekL/sheep-render">软渲染</a>）</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1X7411F744">闫令琪老师的GAMES101课程</a></li>
<li><a href="https://github.com/skywind3000/mini3d">韦易笑老师的mini3d项目</a></li>
<li><a href="https://github.com/skywind3000/RenderHelp">韦易笑老师的RenderHelp项目</a></li>
<li><a href="https://github.com/ssloy/tinyrenderer">Dmitry V. Sokolov老师的tinyrender项目</a></li>
</ul>
<h2 id="双缓冲技术解决渲染撕裂">双缓冲技术解决渲染撕裂</h2>
<p>CRT显示器时代，所谓场消隐期（VBLANK）：喷枪从右下角移动到左上角所花费的时间</p>
<p>渲染撕裂：显示器在绘制像素缓冲区中的内容时，游戏输出了新的渲染结果到像素缓冲区，导致渲染撕裂</p>
<p>双缓冲技术：解决屏幕撕裂，用两块像素缓冲区，游戏交替的在这两块缓冲区中绘制</p>
<p>垂直同步：让交换缓冲区的时机在场消隐期进行</p>
<p>三缓冲技术：利用3个缓冲区，让画面更加平滑，但增加输入延迟</p>
<h2 id="画家算法">画家算法</h2>
<p>所有物体按照从后往前的顺序绘制。优点：绘制绝对正确（包括透明物体），缺点：overdraw高，效率慢</p>
<h2 id="3d渲染">3D渲染</h2>
<p>为什么用三角形表示面片？</p>
<ul>
<li>仅用3顶点表示的最简单的多边形</li>
<li>三角形总在一个面上</li>
<li>任何3D对象都可以简单地用细分三角面表示</li>
</ul>
<p>网格：多个三角面组成</p>
<h3 id="软件光栅化">软件光栅化</h3>
<p>将3D模型正确渲染到2D颜色缓冲的算法</p>
<p>3D模型经过4个主要坐标系空间转到最终的2D颜色缓冲中</p>
<ul>
<li>模型（局部）坐标系：相对于模型自身的坐标系（角色模型一般为两脚中间）</li>
<li>世界坐标系：所有对象都相对于世界原点偏移</li>
<li>视角（摄像机）坐标系：将世界坐标系的模型变换到相对于摄像机的位置上</li>
<li>投影坐标系：将3D场景平铺到2D平面上得到的坐标系</li>
</ul>
<p>除了上面的坐标系外，还有一个特殊的坐标系，就是齐次坐标系</p>
<p>将4D坐标系应用在3D空间中，就被称为齐次坐标系。而第四个分量为w分量。如果w=0，则此齐次坐标是3D向量。而w=1，则表示此齐次坐标是3D的点</p>
<h4 id="矩阵变换">矩阵变换</h4>
<p>将模型在各个坐标系中转换所用的矩阵，就是矩阵变换。</p>
<font style=background:yellow>
此处和之后所用的都为行向量。（OpenGL为列向量）
</font>
<h4 id="模型转世界坐标系">模型转世界坐标系</h4>
<h5 id="平移">平移</h5>
<p>将顶点移动一段距离，只作用在点上</p>
<p>$$
T(t_x,t_y,t_z) = \begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; 1 &amp; 0 &amp; 0 \newline
0 &amp; 0 &amp; 1 &amp; 0 \newline
t_x &amp; t_y &amp; t_z &amp; 1
\end{bmatrix}
$$</p>
<h5 id="旋转">旋转</h5>
<p>将顶点或向量相对于某个轴旋转（欧拉角旋转）</p>
<font style=background:yellow>
旋转矩阵是正交的，就是说转置矩阵就是逆矩阵
</font>
<p>$$
RotateX(\theta) = \begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; \cos \theta &amp; - \sin \theta &amp; 0 \newline
0 &amp; \sin \theta &amp; \cos \theta &amp; 0 \newline
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
$$</p>
<p>$$
RotateY(\theta) = \begin{bmatrix}
\cos \theta &amp; 0 &amp; \sin \theta &amp; 0 \newline
0 &amp; 1 &amp; 0 &amp; 0 \newline
- \sin \theta &amp; 0 &amp; \cos \theta &amp; 0 \newline
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
$$</p>
<p>$$
RotateZ(\theta) = \begin{bmatrix}
\cos \theta &amp; - \sin \theta &amp; 0 &amp; 0 \newline
\sin \theta &amp; \cos \theta &amp; 0 &amp; 0 \newline
0 &amp; 0 &amp; 1 &amp; 0 \newline
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
$$</p>
<h5 id="缩放">缩放</h5>
<p>$$
S(s_x,s_y,s_z) = \begin{bmatrix}
s_x &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; s_y &amp; 0 &amp; 0 \newline
0 &amp; 0 &amp; s_z &amp; 0 \newline
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
$$</p>
<p>按行矩阵应用矩阵变换，乘积的顺序应为：$ model2world = scale * rotation * translation $</p>
<font style=background:yellow>
应先旋转在平移，因为旋转是相对于原点的，先旋转对象可自转。而后旋转则对象就是相对于世界坐标系原点旋转了。
</font>
<h4 id="观察矩阵look-at">观察矩阵(Look-At)</h4>
<p>$L$表示左边或x轴，$U$表示上方或y轴，$F$表示前方或z轴，$T$则是摄像机的平移</p>
<p>$$
LookAt = \begin{bmatrix}
L_x &amp; U_x &amp; F_x &amp; 0 \newline
L_y &amp; U_y &amp; F_y &amp; 0 \newline
L_z &amp; U_z &amp; F_z &amp; 0 \newline
T_x &amp; T_y &amp; T_z &amp; 1
\end{bmatrix}
$$</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>Matrix4x4 <span style="color:#50fa7b">LookAt</span>(Vector3 eye, Vector3 target, Vector3 Up) {
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    Vector3 F <span style="color:#ff79c6">=</span> normalize(target <span style="color:#ff79c6">-</span> eye);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    Vector3 L <span style="color:#ff79c6">=</span> normalize(cross(Up, F));
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    Vector3 U <span style="color:#ff79c6">=</span> cross(F, L);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    Vector3 T;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    T.x <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span>dot(L, eye);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    T.y <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span>dot(U, eye);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    T.z <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span>dot(F, eye);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#6272a4">//创建并返回观察矩阵
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4"></span>    <span style="color:#6272a4">//...
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><h4 id="投影坐标系">投影坐标系</h4>
<h5 id="正交投影">正交投影</h5>
<p>$$
Orthographic = \begin{bmatrix}
\frac{2}{width} &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; \frac{2}{height} &amp; 0 &amp; 0 \newline
0 &amp; 0 &amp; \frac{1}{far - near} &amp; 0 \newline
0 &amp; 0 &amp; \frac{near}{far - near} &amp; 1
\end{bmatrix}
$$</p>
<h5 id="透视投影">透视投影</h5>
<p>$$
Perspective=\begin{bmatrix}
\cot \frac{fov}{2} &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; \frac{height}{width} &amp; 0 &amp; 0 \newline
0 &amp; 0 &amp; \frac{far}{far - near} &amp; 1 \newline
0 &amp; 0 &amp; \frac{-near * far}{far - near} &amp; 0
\end{bmatrix}
$$</p>
<h4 id="光照与着色">光照与着色</h4>
<h5 id="颜色">颜色</h5>
<p>RGB颜色空间：将颜色分为红色，绿色和蓝色分量。</p>
<p>色深：每个像素用多少位来存储（大部分每分量都为8位来存储，就是说每位有256种可能，共大约1600万种不同颜色）</p>
<p>不透明度（用A表示，从而组成RGBA，一共32位）</p>
<h5 id="顶点属性">顶点属性</h5>
<p>模型顶点上存储的额外信息</p>
<ul>
<li>纹理映射：将2D图片映射到3D的三角形中
<ul>
<li>UV坐标：纹理的x坐标为u，y坐标为v</li>
</ul>
</li>
<li>顶点法线：产生凹凸感
<ul>
<li>将拥有该顶点的三角形的法线取平均值，用于平滑模型（如圆形）</li>
<li>每个顶点存储自己的法线方向，用于棱角清晰的模型（如四边形）</li>
</ul>
</li>
</ul>
<p>顶点序：顶点的顺序，用于决定叉乘的值向量的朝向，保持全程一致就可。还可用于背面剔除</p>
<h5 id="光照">光照</h5>
<ul>
<li>环境光：添加到场景中每一个物体上固定的光</li>
<li>方向光：没有位置，只指定光照方向的光</li>
<li>点光源：从某个点向四面八方射出的光照</li>
<li>聚光灯：将点光源限制在锥体内有光</li>
</ul>
<p>Phong光照模型公式：</p>
<div>
$$
Phong 光照 = 环境光 + 漫反射 + 高光
$$
</div>
<ul>
<li>漫反射：光源作用于物体表面的主要反射。被所有方向光，点光源和聚光灯影响。</li>
<li>高光：物体表面的闪光点</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#6272a4">// N = 物体表面法线
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#6272a4">// eye = 摄像机位置
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#6272a4">// pos = 物体表面位置
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#6272a4">// a = 高光量
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#6272a4"></span>Vector3 V <span style="color:#ff79c6">=</span> normalize(eye <span style="color:#ff79c6">-</span> pos);
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>Vector3 Phong <span style="color:#ff79c6">=</span> AmbientColor;   <span style="color:#6272a4">// 环境光
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#6272a4"></span>foreach Light light in scene    <span style="color:#6272a4">// 循环场景中所有的灯光
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#6272a4"></span>    Vector3 L <span style="color:#ff79c6">=</span> normalize(light.pos <span style="color:#ff79c6">-</span> pos); <span style="color:#6272a4">// 从物体表面到光源
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#6272a4"></span>    Phong <span style="color:#ff79c6">+=</span> DiffuseColor <span style="color:#ff79c6">*</span> dot(N, L);  <span style="color:#6272a4">// 漫反射光照强度
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#6272a4"></span>    Vector3 R <span style="color:#ff79c6">=</span> normalize(reflect(<span style="color:#ff79c6">-</span>L, N)); <span style="color:#6272a4">// 计算-L关于N的反射
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4"></span>    Phong <span style="color:#ff79c6">+=</span> SpecularColor <span style="color:#ff79c6">*</span> pow(dot(R, V), a); <span style="color:#6272a4">// 高光强度
</span></span></span></code></pre></div><h6 id="着色方式">着色方式</h6>
<ul>
<li>平面着色：每个三角面只用一种颜色</li>
<li>Gouraud着色：通过顶点颜色插值填充（多边形数量越多越好）</li>
<li>Phong着色：逐像素光照，针对每个像素单独计算</li>
</ul>
<h4 id="深度缓冲区">深度缓冲区</h4>
<p>为场景的每个像素存储数据，与颜色缓冲一样，不过存储的是像素到摄像机的距离（深度）</p>
<p>在每一帧渲染前会清空深度缓冲区（让所有像素无限远）。渲染过程中，深度会在像素着色器渲染前计算出来。如果比当前深度小，则绘制并写入新的深度</p>
<h5 id="透明对象的绘制">透明对象的绘制</h5>
<p>透明对象不适用于深度缓冲，如果透明物体比不透明物体深度浅，如果先画透明物体，则不透明物体就不会被绘制了</p>
<p>为了解决此问题，应用深度测试先画所有的不透明物体，然后关闭深度测试，渲染所有透明物体。确保不透明物体背后的对象不进行渲染仍需进行深度检查</p>
<p>大多数会采用24位或32位的深度缓冲区</p>
<p>怎么解决像素重绘问题？
先绘制深度pass，然后按照所得的深度缓冲结果计算光照pass</p>
<p>利用剔除或者遮挡算法可消除在某些帧完全看不到的对象。类似的算法有二叉树分区算法（BSP），人口算法和遮挡体积等。</p>
<p>（完）</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/categories">Categories</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#双缓冲技术解决渲染撕裂">双缓冲技术解决渲染撕裂</a></li>
    <li><a href="#画家算法">画家算法</a></li>
    <li><a href="#3d渲染">3D渲染</a>
      <ul>
        <li><a href="#软件光栅化">软件光栅化</a>
          <ul>
            <li><a href="#矩阵变换">矩阵变换</a></li>
            <li><a href="#模型转世界坐标系">模型转世界坐标系</a></li>
            <li><a href="#观察矩阵look-at">观察矩阵(Look-At)</a></li>
            <li><a href="#投影坐标系">投影坐标系</a></li>
            <li><a href="#光照与着色">光照与着色</a></li>
            <li><a href="#深度缓冲区">深度缓冲区</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&text=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&is_video=false&description=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87&body=Check out this article: https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&title=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&name=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87&description=%e9%97%b2%e8%af%9d%20%e8%bf%91%e6%97%a5%e8%af%bb%e5%ae%8c%e4%ba%86%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e8%bf%99%e6%9c%ac%e4%b9%a6%e3%80%82%e6%9b%b4%e6%84%9f%e8%a7%89%e6%98%af%e3%80%8a%e6%b8%b8%e6%88%8f%e5%bc%95%e6%93%8e%e6%9e%b6%e6%9e%84%e3%80%8b%e7%9a%84%e7%bc%a9%e7%95%a5%e5%9b%be%e3%80%82%e5%85%88%e9%98%85%e8%af%bb%e6%ad%a4%e4%b9%a6%e4%bc%9a%e5%af%b9%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e6%9c%89%e4%b8%80%e4%b8%aa%e6%95%b4%e4%bd%93%e7%9a%84%e8%ae%a4%e8%af%86%e4%b8%8e%e7%90%86%e8%a7%a3%e3%80%82%e9%80%82%e5%90%88%e9%9c%80%e8%a6%81%e4%ba%86%e8%a7%a3%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e7%9a%84%e5%88%9d%e5%ad%a6%e8%80%85%e9%98%85%e8%af%bb%0a%e6%ad%a4%e4%b9%a6%e5%af%b9%e4%ba%8e%e6%88%91%e4%b9%9f%e6%98%af%e6%a2%b3%e7%90%86%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91%e7%9f%a5%e8%af%86%e7%82%b9%e7%9a%84%e6%a6%82%e6%8b%ac%e5%a5%bd%e4%b9%a6%e3%80%82%e5%af%b9%e4%ba%8e%e6%ad%a4%e4%b9%a6%e4%bc%9a%e5%9c%a8%e9%87%8d%e7%82%b9%e9%83%a8%e5%88%86%e5%81%9a%e6%8f%90%e7%82%bc%e3%80%82%0a%e6%b8%b2%e6%9f%93%e5%9f%ba%e7%a1%80%20%e6%ad%a4%e9%83%a8%e5%88%86%e5%8f%aa%e5%81%9a%e7%ae%80%e5%8d%95%e7%9a%84%e6%80%bb%e7%bb%93%ef%bc%8c%e7%bd%91%e4%b8%8a%e5%b7%b2%e7%bb%8f%e6%9c%89%e5%be%88%e5%a4%9a%e7%9a%84%e5%a5%bd%e6%96%87%e7%ab%a0%e4%ba%86%e3%80%82%e8%80%8c%e6%ad%a4%e4%b9%a6%e4%bd%9c%e8%80%85%e4%b9%9f%e6%b2%a1%e6%9c%89%e5%be%88%e8%af%a6%e7%bb%86%e7%9a%84%e5%86%99%e8%bf%99%e9%83%a8%e5%88%86%e3%80%82%e6%af%95%e7%ab%9f%e8%bf%99%e5%9d%97%e8%a6%81%e6%98%af%e8%ae%b2%e7%bb%86%e4%ba%86%e5%a4%9f%e5%ad%a6%e4%b8%80%e8%be%88%e5%ad%90%e4%ba%86%0a%e6%8e%a8%e8%8d%90%e4%b8%80%e4%ba%9b%e5%a5%bd%e6%96%87%ef%bc%88%e6%9c%89%e5%85%b4%e8%b6%a3%e5%8f%af%e4%bb%a5%e7%9c%8b%e7%9c%8b%e6%88%91%e5%86%99%e7%9a%84%e8%bd%af%e6%b8%b2%e6%9f%93%ef%bc%89%0a%e9%97%ab%e4%bb%a4%e7%90%aa%e8%80%81%e5%b8%88%e7%9a%84GAMES101%e8%af%be%e7%a8%8b%20%e9%9f%a6%e6%98%93%e7%ac%91%e8%80%81%e5%b8%88%e7%9a%84mini3d%e9%a1%b9%e7%9b%ae%20%e9%9f%a6%e6%98%93%e7%ac%91%e8%80%81%e5%b8%88%e7%9a%84RenderHelp%e9%a1%b9%e7%9b%ae%20Dmitry%20V.%20Sokolov%e8%80%81%e5%b8%88%e7%9a%84tinyrender%e9%a1%b9%e7%9b%ae%20%e5%8f%8c%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%e8%a7%a3%e5%86%b3%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%20CRT%e6%98%be%e7%a4%ba%e5%99%a8%e6%97%b6%e4%bb%a3%ef%bc%8c%e6%89%80%e8%b0%93%e5%9c%ba%e6%b6%88%e9%9a%90%e6%9c%9f%ef%bc%88VBLANK%ef%bc%89%ef%bc%9a%e5%96%b7%e6%9e%aa%e4%bb%8e%e5%8f%b3%e4%b8%8b%e8%a7%92%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%b8%8a%e8%a7%92%e6%89%80%e8%8a%b1%e8%b4%b9%e7%9a%84%e6%97%b6%e9%97%b4%0a%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%ef%bc%9a%e6%98%be%e7%a4%ba%e5%99%a8%e5%9c%a8%e7%bb%98%e5%88%b6%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%e4%b8%ad%e7%9a%84%e5%86%85%e5%ae%b9%e6%97%b6%ef%bc%8c%e6%b8%b8%e6%88%8f%e8%be%93%e5%87%ba%e4%ba%86%e6%96%b0%e7%9a%84%e6%b8%b2%e6%9f%93%e7%bb%93%e6%9e%9c%e5%88%b0%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e5%af%bc%e8%87%b4%e6%b8%b2%e6%9f%93%e6%92%95%e8%a3%82%0a%e5%8f%8c%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%ef%bc%9a%e8%a7%a3%e5%86%b3%e5%b1%8f%e5%b9%95%e6%92%95%e8%a3%82%ef%bc%8c%e7%94%a8%e4%b8%a4%e5%9d%97%e5%83%8f%e7%b4%a0%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e6%b8%b8%e6%88%8f%e4%ba%a4%e6%9b%bf%e7%9a%84%e5%9c%a8%e8%bf%99%e4%b8%a4%e5%9d%97%e7%bc%93%e5%86%b2%e5%8c%ba%e4%b8%ad%e7%bb%98%e5%88%b6%0a%e5%9e%82%e7%9b%b4%e5%90%8c%e6%ad%a5%ef%bc%9a%e8%ae%a9%e4%ba%a4%e6%8d%a2%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e6%97%b6%e6%9c%ba%e5%9c%a8%e5%9c%ba%e6%b6%88%e9%9a%90%e6%9c%9f%e8%bf%9b%e8%a1%8c%0a%e4%b8%89%e7%bc%93%e5%86%b2%e6%8a%80%e6%9c%af%ef%bc%9a%e5%88%a9%e7%94%a83%e4%b8%aa%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%8c%e8%ae%a9%e7%94%bb%e9%9d%a2%e6%9b%b4%e5%8a%a0%e5%b9%b3%e6%bb%91%ef%bc%8c%e4%bd%86%e5%a2%9e%e5%8a%a0%e8%be%93%e5%85%a5%e5%bb%b6%e8%bf%9f%0a%e7%94%bb%e5%ae%b6%e7%ae%97%e6%b3%95%20%e6%89%80%e6%9c%89%e7%89%a9%e4%bd%93%e6%8c%89%e7%85%a7%e4%bb%8e%e5%90%8e%e5%be%80%e5%89%8d%e7%9a%84%e9%a1%ba%e5%ba%8f%e7%bb%98%e5%88%b6%e3%80%82%e4%bc%98%e7%82%b9%ef%bc%9a%e7%bb%98%e5%88%b6%e7%bb%9d%e5%af%b9%e6%ad%a3%e7%a1%ae%ef%bc%88%e5%8c%85%e6%8b%ac%e9%80%8f%e6%98%8e%e7%89%a9%e4%bd%93%ef%bc%89%ef%bc%8c%e7%bc%ba%e7%82%b9%ef%bc%9aoverdraw%e9%ab%98%ef%bc%8c%e6%95%88%e7%8e%87%e6%85%a2%0a3D%e6%b8%b2%e6%9f%93%20%e4%b8%ba%e4%bb%80%e4%b9%88%e7%94%a8%e4%b8%89%e8%a7%92%e5%bd%a2%e8%a1%a8%e7%a4%ba%e9%9d%a2%e7%89%87%ef%bc%9f%0a%e4%bb%85%e7%94%a83%e9%a1%b6%e7%82%b9%e8%a1%a8%e7%a4%ba%e7%9a%84%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%a4%9a%e8%be%b9%e5%bd%a2%20%e4%b8%89%e8%a7%92%e5%bd%a2%e6%80%bb%e5%9c%a8%e4%b8%80%e4%b8%aa%e9%9d%a2%e4%b8%8a%20%e4%bb%bb%e4%bd%953D%e5%af%b9%e8%b1%a1%e9%83%bd%e5%8f%af%e4%bb%a5%e7%ae%80%e5%8d%95%e5%9c%b0%e7%94%a8%e7%bb%86%e5%88%86%e4%b8%89%e8%a7%92%e9%9d%a2%e8%a1%a8%e7%a4%ba%20%e7%bd%91%e6%a0%bc%ef%bc%9a%e5%a4%9a%e4%b8%aa%e4%b8%89%e8%a7%92%e9%9d%a2%e7%bb%84%e6%88%90%0a%e8%bd%af%e4%bb%b6%e5%85%89%e6%a0%85%e5%8c%96%20%e5%b0%863D%e6%a8%a1%e5%9e%8b%e6%ad%a3%e7%a1%ae%e6%b8%b2%e6%9f%93%e5%88%b02D%e9%a2%9c%e8%89%b2%e7%bc%93%e5%86%b2%e7%9a%84%e7%ae%97%e6%b3%95%0a3D%e6%a8%a1%e5%9e%8b%e7%bb%8f%e8%bf%874%e4%b8%aa%e4%b8%bb%e8%a6%81%e5%9d%90%e6%a0%87%e7%b3%bb%e7%a9%ba%e9%97%b4%e8%bd%ac%e5%88%b0%e6%9c%80%e7%bb%88%e7%9a%842D%e9%a2%9c%e8%89%b2%e7%bc%93%e5%86%b2%e4%b8%ad%0a%e6%a8%a1%e5%9e%8b%ef%bc%88%e5%b1%80%e9%83%a8%ef%bc%89%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e7%9b%b8%e5%af%b9%e4%ba%8e%e6%a8%a1%e5%9e%8b%e8%87%aa%e8%ba%ab%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%88%e8%a7%92%e8%89%b2%e6%a8%a1%e5%9e%8b%e4%b8%80%e8%88%ac%e4%b8%ba%e4%b8%a4%e8%84%9a%e4%b8%ad%e9%97%b4%ef%bc%89%20%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e6%89%80%e6%9c%89%e5%af%b9%e8%b1%a1%e9%83%bd%e7%9b%b8%e5%af%b9%e4%ba%8e%e4%b8%96%e7%95%8c%e5%8e%9f%e7%82%b9%e5%81%8f%e7%a7%bb%20%e8%a7%86%e8%a7%92%ef%bc%88%e6%91%84%e5%83%8f%e6%9c%ba%ef%bc%89%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e5%b0%86%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%e7%9a%84%e6%a8%a1%e5%9e%8b%e5%8f%98%e6%8d%a2%e5%88%b0%e7%9b%b8%e5%af%b9%e4%ba%8e%e6%91%84%e5%83%8f%e6%9c%ba%e7%9a%84%e4%bd%8d%e7%bd%ae%e4%b8%8a%20%e6%8a%95%e5%bd%b1%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%9a%e5%b0%863D%e5%9c%ba%e6%99%af%e5%b9%b3%e9%93%ba%e5%88%b02D%e5%b9%b3%e9%9d%a2%e4%b8%8a%e5%be%97%e5%88%b0%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%20%e9%99%a4%e4%ba%86%e4%b8%8a%e9%9d%a2%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%e5%a4%96%ef%bc%8c%e8%bf%98%e6%9c%89%e4%b8%80%e4%b8%aa%e7%89%b9%e6%ae%8a%e7%9a%84%e5%9d%90%e6%a0%87%e7%b3%bb%ef%bc%8c%e5%b0%b1%e6%98%af%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e7%b3%bb%0a%e5%b0%864D%e5%9d%90%e6%a0%87%e7%b3%bb%e5%ba%94%e7%94%a8%e5%9c%a83D%e7%a9%ba%e9%97%b4%e4%b8%ad%ef%bc%8c%e5%b0%b1%e8%a2%ab%e7%a7%b0%e4%b8%ba%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e7%b3%bb%e3%80%82%e8%80%8c%e7%ac%ac%e5%9b%9b%e4%b8%aa%e5%88%86%e9%87%8f%e4%b8%baw%e5%88%86%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9cw%3d0%ef%bc%8c%e5%88%99%e6%ad%a4%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e6%98%af3D%e5%90%91%e9%87%8f%e3%80%82%e8%80%8cw%3d1%ef%bc%8c%e5%88%99%e8%a1%a8%e7%a4%ba%e6%ad%a4%e9%bd%90%e6%ac%a1%e5%9d%90%e6%a0%87%e6%98%af3D%e7%9a%84%e7%82%b9%0a%e7%9f%a9%e9%98%b5%e5%8f%98%e6%8d%a2%20%e5%b0%86%e6%a8%a1%e5%9e%8b%e5%9c%a8%e5%90%84%e4%b8%aa%e5%9d%90%e6%a0%87%e7%b3%bb%e4%b8%ad%e8%bd%ac%e6%8d%a2%e6%89%80%e7%94%a8%e7%9a%84%e7%9f%a9%e9%98%b5%ef%bc%8c%e5%b0%b1%e6%98%af%e7%9f%a9%e9%98%b5%e5%8f%98%e6%8d%a2%e3%80%82%0a%e6%ad%a4%e5%a4%84%e5%92%8c%e4%b9%8b%e5%90%8e%e6%89%80%e7%94%a8%e7%9a%84%e9%83%bd%e4%b8%ba%e8%a1%8c%e5%90%91%e9%87%8f%e3%80%82%ef%bc%88OpenGL%e4%b8%ba%e5%88%97%e5%90%91%e9%87%8f%ef%bc%89%20%e6%a8%a1%e5%9e%8b%e8%bd%ac%e4%b8%96%e7%95%8c%e5%9d%90%e6%a0%87%e7%b3%bb%20%e5%b9%b3%e7%a7%bb%20%e5%b0%86%e9%a1%b6%e7%82%b9%e7%a7%bb%e5%8a%a8%e4%b8%80%e6%ae%b5%e8%b7%9d%e7%a6%bb%ef%bc%8c%e5%8f%aa%e4%bd%9c%e7%94%a8%e5%9c%a8%e7%82%b9%e4%b8%8a%0a%24%24%20T%28t_x%2ct_y%2ct_z%29%20%3d%20%5cbegin%7bbmatrix%7d%201%20%26amp%3b%200%20%26amp%3b%200%20%26amp%3b%200%20%5cnewline%200%20%26amp%3b%201%20%26amp%3b%200%20%26amp%3b%200%20%5cnewline%200%20%26amp%3b%200%20%26amp%3b%201%20%26amp%3b%200%20%5cnewline%20t_x%20%26amp%3b%20t_y%20%26amp%3b%20t_z%20%26amp%3b%201%20%5cend%7bbmatrix%7d%20%24%24" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.sooda.net.cn%2fposts%2f%25E6%25B8%25B8%25E6%2588%258F%25E7%25BC%2596%25E7%25A8%258B%25E7%25AE%2597%25E6%25B3%2595%25E4%25B8%258E%25E6%258A%2580%25E5%25B7%25A7%25E6%25B8%25B2%25E6%259F%2593%25E7%25AF%2587%2f&t=%e3%80%8a%e6%b8%b8%e6%88%8f%e7%bc%96%e7%a8%8b%e7%ae%97%e6%b3%95%e4%b8%8e%e6%8a%80%e5%b7%a7%e3%80%8b%e6%b8%b2%e6%9f%93%e7%af%87" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2023  🌌 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/categories">Categories</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>



  


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

</html>
